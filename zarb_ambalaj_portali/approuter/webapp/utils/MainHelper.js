sap.ui.define(["sap/ui/base/ManagedObject","sap/m/MessageBox","sap/m/BusyDialog","sap/m/HBox","sap/m/VBox","sap/m/Text","sap/m/Table","com/app/abdiibrahim/zarbambalajportali/utils/formatter"],function(e,r,a,t,s,o,i,n){"use strict";return e.extend("com.app.abdiibrahim.zarbambalajportali.utils.MainHelper",{formatters:n,setFilterBar:function(e,r){var a=e.getView().byId(r);if(!a){console.error("FilterBar bulunamadı:",r);return}a.addEventDelegate({onAfterRendering:function(r){var a=r.srcControl;var t=e.getOwnerComponent().getModel("i18n").getResourceBundle();if(a._oSearchButton){a._oSearchButton.setText(t.getText("goButtonText"));a._oSearchButton.setIcon("sap-icon://search");a._oSearchButton.setIconFirst(true);a._oSearchButton.setType(sap.m.ButtonType.None);a._oSearchButton.addStyleClass("greenButton")}if(a._oFiltersButton){a._oFiltersButton.setType(sap.m.ButtonType.Transparent);a._oFiltersButton.addStyleClass("blueButton")}if(a._oHideShowButton){a._oHideShowButton.setType(sap.m.ButtonType.Transparent);a._oHideShowButton.addStyleClass("yellowButton")}var s=a.getToolbar?a.getToolbar():a._oToolbar;if(s&&!a._bCustomButtonAdded){a._bCustomButtonAdded=true;s.addContent(new sap.m.Button({text:"Çağrı Uygulamasına Git",icon:"sap-icon://headset",visible:"{pm>/header/routeCallApplication}",press:e._main.onOpenCallScreen.bind(e)}).addStyleClass("orangeButton sapUiSmallMarginLeft"))}debugger}})},setUiForSupplier:function(e,r){var a=e.getOModel(e,"dm");var t=a.getData();var s=e.getOModel(e,"pm");var o=s.getData();t["isSupplier"]=true;t["supplierNo"]=r;a.refresh();o["iconTabBar"]["PKOLMAYAN"]=false;o["iconTabBar"]["SUMMARY"]=true;o["header"]["lifnrFilter"]=false;o["header"]["routeCallApplication"]=false;s.refresh()},onOpenCallScreen:function(e){debugger;var r;if(sap.ushell){r=sap.ushell.Container.getLogonSystem("system").getName()}else{r="DS4"}var a;if(r==="DS4"){a="https://vhvctds4ci.sap.abdiibrahim.com.tr:44300/sap/bc/ui5_ui5/ui2/ushell/shells/abap/FioriLaunchpad.html?sap-client=100&sap-language=TR#ZARB_AMBALAJC-manage"}else if(r==="QS4"){a="https://vhvctqs4ci.sap.abdiibrahim.com.tr:44300/sap/bc/ui5_ui5/ui2/ushell/shells/abap/FioriLaunchpad.html?sap-client=100&sap-language=TR#ZARB_AMBALAJC-manage"}else if(r==="PS4"){a="https://vhvctps4ci.sap.abdiibrahim.com.tr:44300/sap/bc/ui5_ui5/ui2/ushell/shells/abap/FioriLaunchpad.html?sap-client=100&sap-language=TR#ZARB_AMBALAJC-manage"}sap.ui.require(["sap/m/library"],function(e){var r=e.URLHelper;r.redirect(a,false)})},getTabViewData:function(e){e._oData.getList(e)},getIcontabBarSelectedKey:function(e){var r=e.getOModel(e,"dm");var a=r.getData();return a["iconTabBarSelectedKey"]},getOldIcontabBarSelectedKey:function(e){var r=e.getOModel(e,"dm");var a=r.getData();return a["oldIconTabBarSelectedKey"]},setOldIcontabBarSelectedKey:function(e,r){var a=e.getOModel(e,"dm");var t=a.getData();t["oldIconTabBarSelectedKey"]=r;a.refresh()},setOrderList:function(e,r){debugger;var a=e.getOModel(e,"dm");var t=e._main.getIcontabBarSelectedKey(e);var s="/OrderList"+t;a.setProperty(s,[]);a.setProperty(s,r);a.updateBindings(true);if(t==="SUMMARY"){e._main.splitOrderListByDeliveryDate(e,r)}var o=e.getView().byId("idIconTabBar");if(!o)return;var i=o.getItems().find(e=>e.getKey()===t);if(!i)return;var n=i.getContent()[0];if(!n)return;n.setModel(a,"dm")},splitOrderListByDeliveryDate:function(e,r){var a=e.getOModel(e,"dm");var t=new Date;t.setHours(0,0,0,0);var s=new Date(t);s.setDate(s.getDate()+7);var o=[];var i=[];var n=[];r.forEach(function(e){var r=e.Slfdt;r.setHours(0,0,0,0);if(!r)return;if(r<t){i.push(e)}else if(r>=t&&r<=s){o.push(e)}else{n.push(e)}});a.setProperty("/OrderListWeeklyDeliveries",o);a.setProperty("/OrderListLateDeliveries",i);a.setProperty("/OrderListFutureDeliveries",n);a.setProperty("/summaryCounts",{weekly:Array.isArray(o)?o.length:0,late:Array.isArray(i)?i.length:0,future:Array.isArray(n)?n.length:0})},setUiVisibility:function(e,r){debugger;var a=e.getOModel(e,"dm");var t=a.getData();t["Role"]=r;a.refresh();var s=e.getOModel(e,"pm");var o=s.getData();if(r==="Tedarikçi"){o.iconTabBar["PKOLMAYAN"]=false;o.iconTabBar["ACIKCAGRI"]=true;o.iconTabBar["ONAY"]=true;o.iconTabBar["REVF"]=true;o.iconTabBar["REVE"]=false;o.iconTabBar["IPTT"]=true;o.iconTabBar["TUM"]=false;o.iconTabBar["GET_TUM_SIPARIS_S"]=false}else{o.iconTabBar["PKOLMAYAN"]=true;o.iconTabBar["ACIKCAGRI"]=true;o.iconTabBar["ONAY"]=true;o.iconTabBar["REVF"]=true;o.iconTabBar["REVE"]=true;o.iconTabBar["IPTT"]=true;o.iconTabBar["TUM"]=true;o.iconTabBar["GET_TUM_SIPARIS_S"]=true}s.refresh()},setDetailPopupVisibility:function(e,r){var a=e.getOModel(e,"dm");var t=a.getData();t["sSelectedEbelnTableData"][0]["Sevkm"]=r[0].Sevkm;t["sSelectedEbelnTableData"][0]["RestSevkm"]=r[0].RestSevkm;a.refresh();var s=e.getOModel(e,"pm");var o=s.getData();for(var i in o.detailPopup){if(typeof o.detailPopup[i]==="boolean"){o.detailPopup[i]=false}}if(r&&r.length>0){var n=r[0];Object.keys(n).forEach(function(e){if(e.startsWith("BtnVis")&&o.detailPopup.hasOwnProperty(e)){o.detailPopup[e]=n[e]}})}if(o.detailPopup["BtnVisSevk"]){o.detailPopup["SevkedVis"]=true}if(o.detailPopup["BtnVisAddNote"]===true){o.detailPopup["AddNoteArea"]=true}s.refresh();e.closeBusyDialog()},checkData:function(e,r){var a=e.getOModel(e,"dm");var t=a.getData();var s=t.detailPopupNote?.trim();switch(r){case"AN":if(!s){e.showMessage("error","note_field_required");return}e.confirmMessageWithActonResponse(e,"confirmAddNote",e.onConfirmResponse,r);break;case"AC":e.confirmMessageWithActonResponse(e,"confirmApprove",e.onConfirmResponse,r);break;case"RJ":if(!s){e.showMessage("error","note_field_required");return}e.confirmMessageWithActonResponse(e,"confirmReject",e.onConfirmResponse,r);break;case"CN":if(!s){e.showMessage("error","note_field_required");return}e.confirmMessageWithActonResponse(e,"confirmCancel",e.onConfirmResponse,r);break;case"CA":e.confirmMessageWithActonResponse(e,"confirmCancelApprove",e.onConfirmResponse,r);break;case"CR":if(!s){e.showMessage("error","note_field_required");return}e.confirmMessageWithActonResponse(e,"confirmCancelReject",e.onConfirmResponse,r);break;case"CV":if(!s){e.showMessage("error","note_field_required");return}var o=t.sSelectedEbelnTableData[0].Slfdi;if(!o||o.toString().trim()===""){e.showMessage("error","slfdi_field_required");return}e.confirmMessageWithActonResponse(e,"confirmCancelRevise",e.onConfirmResponse,r);break;case"RV":if(!s){e.showMessage("error","note_field_required");return}var o=t.sSelectedEbelnTableData[0].Slfdi;if(!o||o.toString().trim()===""){e.showMessage("error","slfdi_field_required");return}e.confirmMessageWithActonResponse(e,"confirmRevise",e.onConfirmResponse,r);break;case"SE":debugger;var i=t.sSelectedEbelnTableData[0].Tesyr?.trim();var n=t.sSelectedEbelnTableData[0].Plaka?.trim();var l=t.sSelectedEbelnTableData[0].Sofor?.trim();var c=t.sSelectedEbelnTableData[0].RestSevkm?.trim();if(!i){e.showMessage("error","tesyr_field_required");return}if(!n){e.showMessage("error","plaka_field_required");return}if(!l){e.showMessage("error","sofor_field_required");return}if(!c||c==="0"){e.showMessage("error","sevkm_field_required");return}e.confirmMessageWithActonResponse(e,"confirmSevk",e.onConfirmResponse,r);break;case"PK":e.confirmMessageWithActonResponse(e,"confirmPackage",e.onConfirmResponse,r);break;default:break}},approveSuccessInformation:function(e,a){var t=e.getView().getModel("i18n").getResourceBundle();var s=a.Action;var o=t.getText("Success");var i="";switch(s){case"AN":i="noteAddedSuccessfully";break;case"AC":i="approvedSuccessfully";break;case"RJ":i="rejectedSuccessfully";break;case"CN":i="cancelledSuccessfully";break;case"CA":i="cancelApproveSuccess";break;case"CR":i="cancelRejectSuccess";break;case"CV":i="cancelReviseSuccess";break;case"RV":i="reviseSuccess";break;case"SE":i="sevkSuccess";break;case"PK":i="pkSuccess";break;default:i="processSuccesfullyDone";break}r.success(t.getText(i),{title:o,onClose:function(){if(e.OrderDetailPopup){e.OrderDetailPopup.close()}e._oData.getList(e)}})}})});
//# sourceMappingURL=MainHelper.js.map