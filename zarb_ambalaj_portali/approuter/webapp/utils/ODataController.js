sap.ui.define(["sap/ui/base/ManagedObject","sap/m/BusyDialog","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/m/MessageBox"],function(e,a,r,t,s){"use strict";return e.extend("com.app.abdiibrahim.zarbambalajportali.utils.ODataController",{handleODataErrors:function(e){var a=e.getOModel(e,"message").oData;var r="";a.forEach(function(e){if(e.message&&!e.message.includes("An exception was raised")){r+=e.message+"\n"}});if(r.trim()!==""){s.error(r)}},getList:function(e){var a="/AmbOrderListSet";var s=e.getOModel(e,"bm");var o=s.getData();var i=e.getOModel(e,"dm");var n=i.getData();var l=[];var u=e._main.getIcontabBarSelectedKey(e);var g=e.byId("smartFilterBar");if(g){l=g.getFilters()}l.push(new r("StatuFiori",t.EQ,u));if(n["isSupplier"]===true&&n["supplierNo"]!==""){l.push(new r("Lifnr",t.EQ,n["supplierNo"]))}var c=e.getOwnerComponent().getModel();e.openBusyDialog();c.read(a,{filters:l,success:function(a,r){e.closeBusyDialog();if(a&&a.results){e._main.setOrderList(e,a.results)}},error:function(a){e.closeBusyDialog();e._oData.handleODataErrors(e)}})},getPopupInfo:function(e,a){return new Promise(function(s,o){var i=e.getOModel(e,"dm");var n=i.getData();var l="/AmbDetailOprSet";var u=e.getOwnerComponent().getModel();var g=[new r("Ebeln",t.EQ,a.Ebeln),new r("Ebelp",t.EQ,a.Ebelp),new r("Etenr",t.EQ,a.Etenr),new r("Statu",t.EQ,a.Statu),new r("IsSupplier",t.EQ,n.isSupplier),new r("Tabinfo",t.EQ,n.iconTabBarSelectedKey)];e.openBusyDialog();u.read(l,{filters:g,success:function(a){if(a&&a.results){e._main.setDetailPopupVisibility(e,a.results);s()}else{o()}},error:function(a){e.closeBusyDialog();e._oData.handleODataErrors(e);o(a)}})})},approveProcess:function(e,a){var r="/AmbDetailOprSet";debugger;var t=e.getOwnerComponent().getModel();e.openBusyDialog();t.create(r,a,{success:function(a,r){debugger;e.closeBusyDialog();e._main.approveSuccessInformation(e,a)},error:function(a){debugger;e.closeBusyDialog();e._oData.handleODataErrors(e)}})},getTeslimYeriList:function(e){var a="/DomainValueSet";var s=e.getOModel(e,"bm");var o=s.getData();var i=e.getOModel(e,"dm");var n=i.getData();var l=[];l.push(new r("Domname",t.EQ,"ZARBD_AP_TESYR"));var u=e.getOwnerComponent().getModel();u.read(a,{filters:l,success:function(e,a){n["TeslimYeriList"]=e.results;i.refresh()},error:function(a){e.closeBusyDialog();e._oData.handleODataErrors(e)}})}})});
//# sourceMappingURL=ODataController.js.map